{ 
"login": {
    "type": "object",
    "properties": {
        "callsign": { 
            "type": "string",
            "pattern":  "^[A-Z]+\\d+[A-Z]+$",
            "minLength": 3
        },
        "password": {
            "type": "string",
            "minLength": 8
        }
    },
    "required": [ "callsign", "password" ]
},
"register": {
    "type": "object",
    "properties": {
        "callsign": { 
            "type": "string",
            "pattern":  "^[A-Z]+\\d+[A-Z]+$",
            "minLength": 3
        },
        "password": {
            "type": "string",
            "minLength": 8
        },
        "email": {
            "type": "string",
            "format": "email",
            "minLength": 1
        },
        "recaptcha": {
            "type": "string",
            "minLength": 1
        }
    },
    "required": [ "callsign", "password", "email", "recaptcha" ]
},
"passwordRequest": {
    "type": "object",
    "properties": {
        "callsign": { 
            "type": "string",
            "pattern":  "^[A-Z]+\\d+[A-Z]+$",
            "minLength": 3
        },
        "recaptcha": {
            "type": "string",
            "minLength": 1
        }
    },
    "required": [ "callsign", "recaptcha" ]
},
"passwordChange": {
    "type": "object",
    "properties": {
        "token": { 
            "type": "string",
            "minLength": 3
        },
        "password": {
            "type": "string",
            "minLength": 8
        }
    },
    "required": [ "token", "password" ]
},
"contactSupport": {
    "type": "object",
    "properties": {
         "email": {
            "type": "string",
            "format": "email",
            "minLength": 1
        },
        "recaptcha": {
            "type": "string",
            "minLength": 1
        },
        "token": { 
            "type": "string",
            "minLength": 3
        },
         "text": { 
            "type": "string",
            "minLength": 20
        }
    },
    "required": ["text"],
    "anyOf": [
        { "required": ["email", "recaptcha"] },
        { "required": ["token"] }
    ]
},
"adif": {
    "type": "object",
    "properties": {
        "token": { 
            "type": "string",
            "minLength": 3
        },
        "files": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { 
                        "type": "string",
                        "minLength": 3
                    },
                    "file": {}
                },
                "required": ["name", "file"]
            },
            "minItems": 1
        },
        "stationCallsignFieldEnable": {
        }
    },
    "allOf": [
        {"anyOf": [ 
            { 
                "properties": {
                    "stationCallsign": {
                        "type": "string",
                        "pattern": "^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$"
                    },
                    "stationCallsignFieldEnable": {
                        "enum": [false]
                    }
                },
                "required":["stationCallsign", "stationCallsignFieldEnable"]
            },
            { 
                "properties": {
                    "stationCallsignField": {
                        "type": "string",
                        "minLength": 3
                    },
                    "stationCallsignFieldEnable": {
                        "enum": [true]
                    }
                },                
                "required":["stationCallsignField", "stationCallsignFieldEnable"]
            }
        ]},
        {"anyOf":[
            {
                "properties": {
                    "rdaField":{
                        "type": "string",
                        "minLength": 3
                    },
                    "rdaFieldEnable": {
                        "enum": [true]
                    }
                },
                "required": ["rdaField", "rdaFieldEnable"]
            },
            {
                "properties": {
                    "rdaFieldEnable": {
                        "enum": [false]
                    },
                    "files": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "rda": {
                                    "enum": "$rdaValues$"
                                }
                            },
                            "required": ["rda"]
                        }
                    }
                },
                "required": ["files", "rdaFieldEnable"]
            }
        ]}
    ],
    "required": ["token", "files", "stationCallsignFieldEnable"]
},
"uploadsSearch": {
    "type": "object",
    "properties": {
        "rda": {
            "anyOf": [
                {"type": "null"},
                {"enum": "$rdaValues$"}
            ]
        },
        "station": {
            "anyOf": [
                {"type": "null"},
                {
                    "type": "string",
                    "pattern": "(:?\\*|^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$)"
                }
            ]
        },
        "uploader": {
            "anyOf": [
                {"type": "null"},
                {
                    "type": "string",
                    "pattern": "(:?\\*|^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$)"
                }
            ]
        }
    },
    "not": {
        "allOf": [
            {"properties": {"rda": {"type": "null"}}},
            {"properties": {"station": {"type": "null"}}},
            {"properties": {"uploader": {"type": "null"}}},
            {"properties": {"uploadDate": {"type": "null"}}}
        ]
    }
},
"cfmQslQso": {
    "type": "object",
    "properties": {
        "callsign": {
            "type": "string",
            "pattern": "[A-Z]+\\d+[A-Z]+"
        },
        "newCallsign": {
            "type": "string",
            "pattern": "[A-Z]+\\d+[A-Z]+"
        },
        "stationCallsign": {
            "type": "string",
            "pattern": "(:?\\*|^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$)"
        },
        "rda": {"enum": "$rdaValues$"},
        "time": {
            "type": "string",
            "pattern": "\\d\\d\\d\\d"
        },
        "band": {
            "enum": ["1.8", "3.5", "7", "10", "14", "18", "21", "24", "28"]
        },
        "mode": {
            "enum": ["CW", "SSB", "DIGI"]
        },
        "image": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "minLength": 5
                },
                "file": {}
            },
            "required": ["name", "file"]
        }
    },
    "required": ["callsign", "stationCallsign", "rda", "band", "mode", "date", 
        "time", "image"]
},
"cfmRequestQso": {
    "type": "object",
    "properties": {
        "email": {
            "type": "string",
            "format": "email"
        },
        "recaptcha": {
            "type": "string",
            "minLength": 1
        },
        "token": { 
            "type": "string",
            "minLength": 3
        },
        "qso": {
            "type": "array",
            "minItems": 1,
            "items": {
                "type": "object",
                "properties": {
                    "callsign": {
                        "type": "string",
                        "pattern": "[A-Z]+\\d+[A-Z]+"
                    },
                    "stationCallsign": {
                        "type": "string",
                        "pattern": "(:?\\*|^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$)"
                    },
                    "rda": {"enum": "$rdaValues$"},
                    "time": {
                        "type": "string",
                        "pattern": "\\d\\d\\d\\d"
                    },
                    "band": {
                        "enum": ["1.8", "3.5", "7", "10", "14", "18", "21", "24", "28"]
                    },
                    "mode": {
                        "enum": ["CW", "SSB", "DIGI"]
                    },
                    "correspondent": {
                        "type": "string",
                        "pattern": "[A-Z]+\\d+[A-Z]+"
                    },
                    "email": {
                        "type": "string",
                        "format": "email"
                    }
                },
                "required": ["callsign", "stationCallsign", "rda", "band", "mode", "date", 
                    "time", "recRST", "sentRST", "correspondent", "email"]
            }
        }
    },
    "required": ["qso"],
    "anyOf": [
        {"required": ["email", "recaptcha"]},
        {"required": ["token"]}
    ]
},
"qslAdmin":{
    "type": "array",
    "minItems": 1,
    "items": {
        "type": "object",
        "properties": {
            "id": {"type": "number"},
            "state": {"type": "boolean"},
            "comment": {
                "oneOf": [
                    {"type": "string"},
                    {"type": "null"}
                ]
            }
        },
        "required": ["id", "state", "comment"]
    }
},
"chat": {
    "type": "object",
    "properties": {
        "token": { 
            "type": "string",
            "minLength": 3
        },
        "callsign": {
            "type": "string",
            "pattern": "(:?\\*|^(:?[A-Z\\d]+\\/)?[A-Z]+\\d+[A-Z]+(:?\\/[A-Z\\d]+)*$)"
        },
        "message": {
            "type": "string",
            "minLength": 1
        },
        "delete": {
            "type": "number"
        },
        "exit": {
            "type": "boolean"
        }
    },
    "anyOf": [
        {"required": ["token"]},
        {"required": ["callsign"]}
    ]
}
}
